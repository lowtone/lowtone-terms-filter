// Generated by CoffeeScript 1.5.0
(function() {
  var $, settings, wp_widgets;

  $ = this.jQuery;

  settings = this.lowtone_terms_filter_admin;

  wp_widgets = this.wpWidgets;

  $(function() {
    var $selects;
    $selects = $('select.lowtone_terms_filter.post_type');
    return $selects.each(function() {
      var $post_type_select, $taxonomy_select, update_taxonomies;
      $post_type_select = $(this);
      $taxonomy_select = $post_type_select.closest('form').find('select.lowtone_terms_filter.taxonomy');
      update_taxonomies = function() {
        var data, success;
        data = {
          action: "lowtone_terms_filter_taxonomies",
          post_type: $post_type_select.val()
        };
        success = function(response) {
          $taxonomy_select.empty();
          if (200 !== response.meta.code) {
            return;
          }
          return $.each(response.data.taxonomies, function(key, val) {
            return $taxonomy_select.append($('<option>').attr('value', key).text(val));
          });
        };
        return $.getJSON(settings.ajaxurl, data, success);
      };
      return $post_type_select.change(update_taxonomies);
    });
  });

}).call(this);
