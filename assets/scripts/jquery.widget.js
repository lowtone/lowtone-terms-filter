// Generated by CoffeeScript 1.6.3
(function() {
  var $, settings;

  $ = this.jQuery;

  settings = this.lowtone_terms_filter;

  $(function() {
    var $widgets;
    $widgets = $('.widget_lowtone_terms_filter, .widget_lowtone_terms_filters');
    return $widgets.find('ul').each(function() {
      var $hidden, $items, $list, $toggle, hide_text, show_text, toggle;
      $list = $(this);
      $items = $list.find('li');
      $hidden = $items.slice(parseInt(settings.visible_items) + 1);
      if ($hidden.length < 1) {
        return;
      }
      show_text = settings.locales.show_text.replace('{num_items}', $items.length);
      hide_text = settings.locales.hide_text.replace('{num_items}', $hidden.length);
      $toggle = $('<a class="toggle">').insertAfter($items.parent());
      toggle = function() {
        $hidden.toggle();
        if ($hidden.is(':hidden')) {
          return $toggle.html(show_text).addClass('expand').removeClass('collapse');
        } else {
          return $toggle.html(hide_text).addClass('collapse').removeClass('expand');
        }
      };
      toggle();
      return $toggle.click(toggle);
    });
  });

}).call(this);
